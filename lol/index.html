<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />

    <title>Dialog</title>
  </head>
  <body>
    <style>
      span {
        display: block;
      }
    </style>
    <h2>LOGS</h2>
    <div id="data"></div>
    <input
      style="
        background: lightgrey;
        width: 80%;
        height: 50px;
        border: 1px solid black;
      "
      id="mode"
    ></input>
    <button
    style="
        background: lightgrey;
        width: 10%;
        height: 50px;
        border: 1px solid black;

    "
      id="submit"
    >OK</button>
    <script>
      require("./renderer.js")
      const { ipcRenderer } = require("electron")
      
        function MODE(mod, path) {
          console.log(mod,path);
          ipcRenderer.send("terminate", mod, path)
        }
        
    </script>
    <script>
      const root = document.getElementById("data")

      ipcRenderer.on("new_data", function (e, item) {
        root.innerHTML = item
        window.scrollTo(0, document.body.scrollHeight)
      })
      ipcRenderer.on("infection", function (e, item) {
        ipcRenderer.send("stopReading")
        root.innerHTML += `<h2>INFECTIONS</h2>
        <div>${item.map((infect, i) => {
          return `<span>${"["+i+"]" + " INFECTED : " + infect.toString()}</span>
          <button onclick="MODE('d','${infect.toString()}')" style="background: lightcoral;">DEL</button> <button onclick="MODE('q','${infect.toString()}')" style="background: lightyellow;">QUA</button>`
        })}</div>`
        window.scrollTo(0, document.body.scrollHeight)
      })
      ipcRenderer.on("noInfection", function (e, item) {
        root.innerHTML += `<h2>Scan finished NO infections</h2>`
        window.scrollTo(0, document.body.scrollHeight)
      })
    </script>
   
  </body>
</html>
